# LeafKnow é¡¹ç›®å¯åŠ¨æŒ‡å—

## ğŸ—ï¸ é¡¹ç›®æ¶æ„æ¦‚è§ˆ

LeafKnow æ˜¯ä¸€ä¸ªçŸ¥è¯†ç®¡ç†å¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼š

```
é¡¹ç›®æ¶æ„ï¼š
â”œâ”€â”€ APIåç«¯ (Python FastAPI) - è¿è¡Œåœ¨ 60000 ç«¯å£
â”œâ”€â”€ å‰ç«¯åº”ç”¨ (Tauri + React) - æ¡Œé¢åº”ç”¨
â””â”€â”€ æ•°æ®åº“ (SQLite + LanceDB) - æœ¬åœ°å­˜å‚¨
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Python**: >= 3.10 âš ï¸ (å½“å‰ç³»ç»Ÿ: 3.8.10ï¼Œéœ€è¦å‡çº§)
- **Node.js**: >= 18.0.0 âœ… (å½“å‰: 20.18.1)
- **Rust**: >= 1.70.0 âŒ (æœªå®‰è£…)
- **UV**: >= 0.5.0 âœ… (å½“å‰: 0.6.13)
- **Bun**: >= 1.0.0 âŒ (æœªå®‰è£…ï¼Œå¯ç”¨npmæ›¿ä»£)

### å¯é€‰è½¯ä»¶
- **Git**: âœ… (å·²é…ç½®)
- **VS Code**: æ¨èçš„IDE
- **jq**: JSONå¤„ç†å·¥å…· (APIè„šæœ¬éœ€è¦)

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### 1. å‡çº§Python (é‡è¦)
å½“å‰Pythonç‰ˆæœ¬(3.8.10)ä¸ç¬¦åˆè¦æ±‚ï¼Œéœ€è¦å‡çº§åˆ°3.10+ï¼š

#### Windows:
```bash
# æ–¹æ³•1: ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…
# è®¿é—® https://www.python.org/downloads/ ä¸‹è½½Python 3.10+

# æ–¹æ³•2: ä½¿ç”¨winget
winget install Python.Python.3.11

# æ–¹æ³•3: ä½¿ç”¨Anaconda
conda install python=3.11
```

#### éªŒè¯å®‰è£…:
```bash
python --version  # åº”è¯¥æ˜¾ç¤º Python 3.10.x æˆ–æ›´é«˜ç‰ˆæœ¬
python3 --version  # åº”è¯¥æ˜¾ç¤º Python 3.10.x æˆ–æ›´é«˜ç‰ˆæœ¬
```

### 2. å®‰è£…Rust
```bash
# Windows (PowerShell):
winget install Rustlang.Rust.MSVC

# æˆ–è€…è®¿é—® https://rustup.rs/ ä¸‹è½½å®‰è£…

# éªŒè¯å®‰è£…:
cargo --version
```

### 3. å®‰è£…Bun (å¯é€‰ï¼Œæ¨è)
```bash
# Windows (PowerShell):
powershell -c "irm bun.sh/install.ps1 | iex"

# æˆ–è€…ä½¿ç”¨npmæ›¿ä»£ (é¡¹ç›®ä¸­å·²é…ç½®npmæ”¯æŒ)
npm install -g bun

# éªŒè¯å®‰è£…:
bun --version
```

### 4. å®‰è£…jq (APIè„šæœ¬éœ€è¦)
```bash
# Windows (PowerShell):
winget install jqlang.jq

# æˆ–è€…ä½¿ç”¨Chocolatey:
choco install jq

# éªŒè¯å®‰è£…:
jq --version
```

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ–¹å¼ä¸€ï¼šå®Œæ•´å¯åŠ¨ (æ¨è)

#### ç¬¬1æ­¥ï¼šå¯åŠ¨APIåç«¯
```bash
# è¿›å…¥Coreç›®å½•
cd core

# å®‰è£…Pythonä¾èµ–
uv sync

# å¯åŠ¨CoreæœåŠ¡å™¨ (Windows)
.\core_standalone.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨ (è·¨å¹³å°)
uv run main.py --port 60000 --host 127.0.0.1 --db-path "sqlite.db"

# APIæœåŠ¡å™¨å°†è¿è¡Œåœ¨: http://127.0.0.1:60000
```

#### ç¬¬2æ­¥ï¼šå¯åŠ¨å‰ç«¯åº”ç”¨
```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd leaf-know

# å®‰è£…Node.jsä¾èµ– (ä½¿ç”¨bun)
bun install

# æˆ–ä½¿ç”¨npm
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼ (ä½¿ç”¨bun)
bun tauri dev

# æˆ–ä½¿ç”¨npm
npm run tauri dev

# æˆ–ç›´æ¥è¿è¡Œè„šæœ¬
.\dev.sh
```

### æ–¹å¼äºŒï¼šä»…å¯åŠ¨å‰ç«¯ (å¼€å‘æ¨¡å¼)
å¦‚æœåªæƒ³å¼€å‘å‰ç«¯ç•Œé¢ï¼š

```bash
cd leaf-know
bun install
bun run dev  # ä»…å¯åŠ¨Webå¼€å‘æœåŠ¡å™¨
```

### æ–¹å¼ä¸‰ï¼šæ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºå‰ç«¯
cd leaf-know
bun run build

# è¿è¡Œæ„å»ºåçš„åº”ç”¨
bun run tauri build
```

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

### Coreåç«¯ (`/core`)
- `main.py`: FastAPIä¸»åº”ç”¨å…¥å£
- `chatsession_*.py`: èŠå¤©ä¼šè¯ç®¡ç†
- `models_*.py`: AIæ¨¡å‹ç®¡ç†
- `db_mgr.py`: æ•°æ®åº“ç®¡ç†
- `core_standalone.sh`: ä¸€é”®å¯åŠ¨è„šæœ¬

### å‰ç«¯åº”ç”¨ (`/leaf-know`)
- `src/`: Reactæºä»£ç 
- `src-tauri/`: Tauriåç«¯(Rustä»£ç )
- `package.json`: Node.jsä¾èµ–é…ç½®
- `dev.sh`: å¼€å‘æ¨¡å¼å¯åŠ¨è„šæœ¬

## ğŸ” å¯åŠ¨éªŒè¯

### æ£€æŸ¥APIæ˜¯å¦æ­£å¸¸è¿è¡Œ
```bash
# æµ‹è¯•APIç«¯ç‚¹
curl http://127.0.0.1:60000/health

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®
# http://127.0.0.1:60000/docs  (APIæ–‡æ¡£)
```

### æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
- Tauriåº”ç”¨çª—å£åº”è¯¥è‡ªåŠ¨æ‰“å¼€
- å¦‚æœæ²¡æœ‰æ‰“å¼€ï¼Œæ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. Pythonç‰ˆæœ¬ä¸å…¼å®¹
```bash
# ç—‡çŠ¶: uv sync æ—¶å‡ºç°ç‰ˆæœ¬é”™è¯¯
# è§£å†³: å‡çº§Pythonåˆ°3.13+
```

### 2. Rustæœªå®‰è£…
```bash
# ç—‡çŠ¶: tauri dev æ—¶æç¤ºæ‰¾ä¸åˆ°cargo
# è§£å†³: å®‰è£…Rustå·¥å…·é“¾
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### 3. ç«¯å£è¢«å ç”¨
```bash
# ç—‡çŠ¶: APIå¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£60000è¢«å ç”¨
# è§£å†³: ä¿®æ”¹ç«¯å£æˆ–å…³é—­å ç”¨è¿›ç¨‹
# Windows:
netstat -ano | findstr :60000
taskkill /PID <è¿›ç¨‹ID> /F
```

### 4. æ•°æ®åº“è·¯å¾„é—®é¢˜
```bash
# ç—‡çŠ¶: APIå¯åŠ¨æ—¶æ•°æ®åº“è¿æ¥å¤±è´¥
# è§£å†³: ç¡®ä¿æ•°æ®åº“ç›®å½•å­˜åœ¨ï¼Œæˆ–ä¿®æ”¹æ•°æ®åº“è·¯å¾„
mkdir -p ~/Library/Application\ Support/com.leafmove.leaf-know/
```

### 5. å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥
```bash
# ç—‡çŠ¶: bun install æˆ– npm install å¤±è´¥
# è§£å†³: æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules bun.lock
bun install  # æˆ– npm install
```

## ğŸ“± å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘
1. å¯åŠ¨APIåç«¯ (ç»ˆç«¯1)
2. å¯åŠ¨å‰ç«¯åº”ç”¨ (ç»ˆç«¯2)
3. ä¿®æ”¹ä»£ç è‡ªåŠ¨çƒ­é‡è½½
4. åœ¨Tauriåº”ç”¨ä¸­æµ‹è¯•åŠŸèƒ½

### è°ƒè¯•æŠ€å·§
- APIè°ƒè¯•: è®¿é—® `http://127.0.0.1:60000/docs`
- å‰ç«¯è°ƒè¯•: ä½¿ç”¨F12å¼€å‘è€…å·¥å…·
- æ—¥å¿—æŸ¥çœ‹: APIå¯åŠ¨åçš„ç»ˆç«¯è¾“å‡º

### æ•°æ®ä½ç½®
- **æ•°æ®åº“**: `~/Library/Application Support/com.leafmove.leaf-know/sqlite.db`
- **æ—¥å¿—**: APIç»ˆç«¯è¾“å‡º
- **é…ç½®**: `leaf-know/src-tauri/tauri.conf.json`

## ğŸ¯ ä¸‹ä¸€æ­¥

å¯åŠ¨æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š
1. æ¢ç´¢APIæ–‡æ¡£å’ŒåŠŸèƒ½
2. æŸ¥çœ‹å‰ç«¯ç•Œé¢å’Œäº¤äº’
3. å¼€å§‹äºŒæ¬¡å¼€å‘
4. é˜…è¯»å…¶ä»–åä½œæ–‡æ¡£

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æŒ‡å—çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„GitHub Issues
3. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„å…¨æ ˆåº”ç”¨ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦è§£å†³ä¸€äº›ç¯å¢ƒé…ç½®é—®é¢˜ã€‚è€å¿ƒæŒ‰ç…§æ­¥éª¤æ“ä½œï¼Œå¤§å¤šæ•°é—®é¢˜éƒ½èƒ½è§£å†³ã€‚