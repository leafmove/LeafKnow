# 标准发布流程

## 推荐的标准发布流程

既然你已经有了正确的workflow文件，我来给你一个完整的发布流程：

### 方案1：使用release分支

```bash
# 1. 切换到release分支
git checkout release

# 2. 从main分支拉取最新代码
git merge main

# 3. 更新版本号
# 编辑 tauri-app/src-tauri/tauri.conf.json，修改版本号，如 "0.3.4"

# 4. 可选：更新releaseBody描述
# 编辑 .github/workflows/build-macos-release.yaml 中的 releaseBody

# 5. 提交并推送
git add .
git commit -m "release: bump version to 0.3.4"
git push origin release

# 6. 等待GitHub Actions完成构建

# 7. 在GitHub上将draft release改为正式发布

# 8. 将发布的改动合并回main（可选但推荐）
git checkout main
git merge release
git push origin main
```

### 方案2：使用Git Tag触发（更标准）

如果你想要更标准的做法，修改workflow也能做到基于tag触发：

```bash
# 基于tag的发布流程（推荐）
# 1. 在main分支更新版本和发布说明
git checkout main

# 2. 编辑版本号
# 编辑 tauri-app/src-tauri/tauri.conf.json 中的 "version": "0.3.4"

# 3. 同步版本号到前端或build一次看看是否能正常构建release包顺便同步版本号
cd tauri-app
sh scripts/sync-version.sh
cd ..

# 4. 编辑发布说明（重要：这会成为Release的内容）
# 编辑 .github/workflows/build-macos-release.yaml 中的 releaseBody 部分
# 更新 "### 📋 更新内容" 下的具体变更说明

# 5. 提交所有修改（包括同步后的 version.ts）
git add .
git commit -m "release: bump version to 0.3.4"

# 6. 创建tag（tag名要与版本号对应）
git tag v0.3.4

# 7. 推送代码和tag
git push origin main
git push origin v0.3.4

# 8. 自动触发构建和发布
# GitHub Actions会自动创建draft release并上传所有bundle文件

# 9. 在GitHub上确认并发布
# 检查draft release，确认无误后点击"Publish release"
```

## 一键发布流程（推荐）

`sh scripts/release.sh 0.3.4 "修复了XXX问题，新增了YYY功能"`
