# æ ‡å‡†å‘å¸ƒæµç¨‹

## æ¨èçš„æ ‡å‡†å‘å¸ƒæµç¨‹

æ—¢ç„¶ä½ å·²ç»æœ‰äº†æ­£ç¡®çš„workflowæ–‡ä»¶ï¼Œæˆ‘æ¥ç»™ä½ ä¸€ä¸ªå®Œæ•´çš„å‘å¸ƒæµç¨‹ï¼š

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨releaseåˆ†æ”¯

```bash
# 1. åˆ‡æ¢åˆ°releaseåˆ†æ”¯
git checkout release

# 2. ä»mainåˆ†æ”¯æ‹‰å–æœ€æ–°ä»£ç 
git merge main

# 3. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ tauri-app/src-tauri/tauri.conf.jsonï¼Œä¿®æ”¹ç‰ˆæœ¬å·ï¼Œå¦‚ "0.3.4"

# 4. å¯é€‰ï¼šæ›´æ–°releaseBodyæè¿°
# ç¼–è¾‘ .github/workflows/build-macos-release.yaml ä¸­çš„ releaseBody

# 5. æäº¤å¹¶æ¨é€
git add .
git commit -m "release: bump version to 0.3.4"
git push origin release

# 6. ç­‰å¾…GitHub Actionså®Œæˆæ„å»º

# 7. åœ¨GitHubä¸Šå°†draft releaseæ”¹ä¸ºæ­£å¼å‘å¸ƒ

# 8. å°†å‘å¸ƒçš„æ”¹åŠ¨åˆå¹¶å›mainï¼ˆå¯é€‰ä½†æ¨èï¼‰
git checkout main
git merge release
git push origin main
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨Git Tagè§¦å‘ï¼ˆæ›´æ ‡å‡†ï¼‰

å¦‚æœä½ æƒ³è¦æ›´æ ‡å‡†çš„åšæ³•ï¼Œä¿®æ”¹workflowä¹Ÿèƒ½åšåˆ°åŸºäºtagè§¦å‘ï¼š

```bash
# åŸºäºtagçš„å‘å¸ƒæµç¨‹ï¼ˆæ¨èï¼‰
# 1. åœ¨mainåˆ†æ”¯æ›´æ–°ç‰ˆæœ¬å’Œå‘å¸ƒè¯´æ˜
git checkout main

# 2. ç¼–è¾‘ç‰ˆæœ¬å·
# ç¼–è¾‘ tauri-app/src-tauri/tauri.conf.json ä¸­çš„ "version": "0.3.4"

# 3. åŒæ­¥ç‰ˆæœ¬å·åˆ°å‰ç«¯æˆ–buildä¸€æ¬¡çœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸æ„å»ºreleaseåŒ…é¡ºä¾¿åŒæ­¥ç‰ˆæœ¬å·
cd tauri-app
sh scripts/sync-version.sh
cd ..

# 4. ç¼–è¾‘å‘å¸ƒè¯´æ˜ï¼ˆé‡è¦ï¼šè¿™ä¼šæˆä¸ºReleaseçš„å†…å®¹ï¼‰
# ç¼–è¾‘ .github/workflows/build-macos-release.yaml ä¸­çš„ releaseBody éƒ¨åˆ†
# æ›´æ–° "### ğŸ“‹ æ›´æ–°å†…å®¹" ä¸‹çš„å…·ä½“å˜æ›´è¯´æ˜

# 5. æäº¤æ‰€æœ‰ä¿®æ”¹ï¼ˆåŒ…æ‹¬åŒæ­¥åçš„ version.tsï¼‰
git add .
git commit -m "release: bump version to 0.3.4"

# 6. åˆ›å»ºtagï¼ˆtagåè¦ä¸ç‰ˆæœ¬å·å¯¹åº”ï¼‰
git tag v0.3.4

# 7. æ¨é€ä»£ç å’Œtag
git push origin main
git push origin v0.3.4

# 8. è‡ªåŠ¨è§¦å‘æ„å»ºå’Œå‘å¸ƒ
# GitHub Actionsä¼šè‡ªåŠ¨åˆ›å»ºdraft releaseå¹¶ä¸Šä¼ æ‰€æœ‰bundleæ–‡ä»¶

# 9. åœ¨GitHubä¸Šç¡®è®¤å¹¶å‘å¸ƒ
# æ£€æŸ¥draft releaseï¼Œç¡®è®¤æ— è¯¯åç‚¹å‡»"Publish release"
```

## ä¸€é”®å‘å¸ƒæµç¨‹ï¼ˆæ¨èï¼‰

`sh scripts/release.sh 0.3.4 "ä¿®å¤äº†XXXé—®é¢˜ï¼Œæ–°å¢äº†YYYåŠŸèƒ½"`
